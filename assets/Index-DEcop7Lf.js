import{_ as x,c as i,o as u,r as V,n as M,a as s,b as R,d as ne,w as Z,e as b,v as ae,f as v,g as y,h as _,i as se,j as A,F as D,k as B,l as p,m as T,p as oe,q as de,s as ie,t as $}from"./index-ZpbVgKX3.js";const ue=["disabled"],re={__name:"BaseButton",props:{customClass:{type:String,default:"icon-button"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:l}){const m=l;return(f,o)=>(u(),i("button",{type:"button",class:M(`${e.customClass} ${e.disabled?"disabled":""}`),onClick:o[0]||(o[0]=d=>e.disabled?void 0:m("click")),disabled:e.disabled},[V(f.$slots,"icon",{},void 0),V(f.$slots,"default",{},void 0)],10,ue))}},ve=x(re,[["__scopeId","data-v-5cae7ed8"]]),ce={},fe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-calendar"};function pe(e,l){return u(),i("svg",fe,l[0]||(l[0]=[s("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},null,-1),s("line",{x1:"16",y1:"2",x2:"16",y2:"6"},null,-1),s("line",{x1:"8",y1:"2",x2:"8",y2:"6"},null,-1),s("line",{x1:"3",y1:"10",x2:"21",y2:"10"},null,-1)]))}const me=x(ce,[["render",pe]]),ge={},Ce={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#1f1f1f"};function $e(e,l){return u(),i("svg",Ce,l[0]||(l[0]=[s("path",{d:"M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z"},null,-1)]))}const he=x(ge,[["render",$e]]),ye={},ke={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#1f1f1f"};function we(e,l){return u(),i("svg",ke,l[0]||(l[0]=[s("path",{d:"M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"},null,-1),R("\\ ")]))}const be=x(ye,[["render",we]]),E=(e,l,m)=>{l=l-1;const f=new Date(e,l,m);return f.getFullYear()==e&&f.getMonth()==l&&f.getDate()==m},C=e=>("0"+e).slice(-2),De=ne({name:"RocCustomDatePicker",components:{BaseButton:ve,CalendarIcon:me,ChevronLeftIcon:he,ChevronRightIcon:be},props:{date:{type:String,default:""},placeholder:{type:String,default:"民國年/月/日"},splitter:{type:String,default:"/"},readonly:{type:Boolean,default:!1},needInput:{type:Boolean,default:!0},needFuture:{type:Boolean,default:!1},autoToRocFormat:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:date"],setup(e,{emit:l}){const m=p(!0),f=p(!1),o=p(null),d=p(null),a=p(null),r=p([]),h=p("date"),k=p(null),L=p(Math.floor((new Date().getFullYear()-1911)/15)),t=p(null),I=["日","一","二","三","四","五","六"],F=[{text:"一月",value:1},{text:"二月",value:2},{text:"三月",value:3},{text:"四月",value:4},{text:"五月",value:5},{text:"六月",value:6},{text:"七月",value:7},{text:"八月",value:8},{text:"九月",value:9},{text:"十月",value:10},{text:"十一月",value:11},{text:"十二月",value:12}],U=T({get:()=>e.date,set:n=>l("update:date",n)}),O=T(()=>{var n;return((n=F.find(c=>c.value===d.value))==null?void 0:n.text)||""}),q=T(()=>parseInt(o.value)<=0?`民國前 ${Math.abs(o.value)+1} 年`:`民國 ${o.value} 年`),z=T(()=>{const n=k.value*15;return Array.from({length:15},(g,w)=>n+w)}),G=T(()=>{const n=o.value,c=d.value;return!n||!c?0:new Date(n+1911,c-1,1).getDay()});oe(()=>t.value,(n,c)=>{if(n!==c){const g=new Date(n).toString()!=="Invalid Date",w=n.split(e.splitter);if(!g||w.length!==3){N();return}o.value=parseInt(w[0]),d.value=parseInt(w[1]),a.value=parseInt(w[2]),g&&E(o.value+1911,d.value,a.value)?U.value=e.autoToRocFormat?`${o.value+1911}/${C(d.value)}/${C(a.value)}`:n:U.value=""}});const Y=()=>{if(r.value=[],o.value&&d.value){const n=o.value+1911,c=d.value,g=new Date(n,c,0).getDate();r.value=Array.from({length:g},(w,le)=>le+1)}},H=n=>{n==="minusYear"?o.value-=1:n==="plusYear"?o.value+=1:n==="minusMonth"?d.value>1?d.value-=1:(d.value=12,o.value-=1):n==="plusMonth"&&(d.value<12?d.value+=1:(d.value=1,o.value+=1)),Y()},J=n=>`${o.value}${e.splitter}${C(d.value)}${e.splitter}${C(n)}`===t.value,K=()=>{var c;const n=(c=t.value)==null?void 0:c.split(e.splitter);!n||n.length!==3||!E(parseInt(n[0])+1911,parseInt(n[1]),parseInt(n[2]))?N():(P(t.value),t.value=`${o.value}${e.splitter}${C(d.value)}${e.splitter}${C(a.value)}`),setTimeout(()=>{f.value?j():f.value=!0},50)},j=()=>{h.value="date",f.value=!1},Q=n=>{h.value=n},W=n=>{o.value=n,h.value="month",d.value=null},X=n=>{d.value=n,h.value="date",a.value=null,Y()},ee=n=>{a.value=n,t.value=[o.value,C(d.value),C(a.value)].join(e.splitter),f.value=!1},N=()=>{const n=new Date;o.value=n.getFullYear()-1911,d.value=n.getMonth()+1,a.value=null,k.value=Math.floor(o.value/15),setTimeout(()=>{Y()},100)},P=(n,c=!1)=>{const g=n.split(e.splitter);o.value=c?parseInt(g[0])-1911:parseInt(g[0]),d.value=parseInt(g[1]),a.value=parseInt(g[2]),k.value=Math.floor(o.value/15),setTimeout(()=>{Y()},100)},te=(n,c)=>{if(e.needFuture)return!0;if(n==="year")return!(c>new Date().getFullYear()-1911);if(n==="month")return!(o.value>=new Date().getFullYear()-1911&&c>new Date().getMonth()+1);if(n==="date")return!(new Date(o.value+1911,d.value-1,c)>new Date)};return de(()=>{e.date?(P(e.date,e.autoToRocFormat),t.value=`${o.value}${e.splitter}${C(d.value)}${e.splitter}${C(a.value)}`,m.value=!1):N()}),ie(()=>{document.removeEventListener("click",j)}),{changeCalendar:H,changeCalendarType:Q,checkIsSelectedDate:J,displayedDate:t,displayedMonth:O,displayedYear:q,firstDayOfMonth:G,showCalendar:f,selectedYear:o,selectedMonth:d,selectedDay:a,calendarDays:r,months:F,years:z,toggleCalendar:K,closeCalendar:j,generateDayCalendar:Y,selectDate:ee,selectMonth:X,selectYear:W,selectedType:h,weekdays:I,myDate:U,yearRangeIndex:k,currentYearRangeIndex:L,canClick:te}}}),Ie={class:"date-picker"},Me=["placeholder","readonly","disabled"],xe={key:0,class:"flex gap-x-4 items-center mb-6"},Ye={class:"flex gap-x-2 items-center"},Be={class:"whitespace-nowrap"},Te={class:"flex gap-x-2 items-center"},Re={class:"whitespace-nowrap"},Fe={key:1,class:"flex flex-nowrap gap-x-2 items-center"},_e={class:"year-calendar"},Se=["onClick"],Le={key:2,class:"month-calendar"},Ue=["onClick"],je={key:0,class:"day-calendar"},Ne=["onClick"];function Pe(e,l,m,f,o,d){const a=_("CalendarIcon"),r=_("base-button"),h=_("ChevronLeftIcon"),k=_("ChevronRightIcon"),L=se("click-outside");return u(),i("div",Ie,[s("div",{class:M(`input-wrapper px-2 ${e.needInput?"border border-solid rounded-[5px] border-[#ccc]":""}`),onClick:l[11]||(l[11]=A(()=>{},["stop"]))},[e.needInput?Z((u(),i("input",{key:0,type:"text","onUpdate:modelValue":l[0]||(l[0]=t=>e.displayedDate=t),placeholder:e.placeholder,class:M(`outline-none !border-hidden ${e.disabled?"disabled":""}`),readonly:e.readonly,disabled:e.disabled,onClick:l[1]||(l[1]=t=>e.readonly?e.toggleCalendar():void 0)},null,10,Me)),[[ae,e.displayedDate]]):b("",!0),s("div",null,[v(r,{disabled:e.disabled,onClick:e.toggleCalendar},{icon:y(()=>[v(a)]),_:1},8,["disabled","onClick"]),e.showCalendar?Z((u(),i("div",{key:0,id:"customCalendar",class:"calendar",onClick:l[10]||(l[10]=A(()=>{},["stop"]))},[e.selectedType==="date"?(u(),i("div",xe,[s("div",Ye,[v(r,{onClick:l[2]||(l[2]=t=>e.changeCalendar("minusYear")),disabled:e.selectedYear===1},{icon:y(()=>[v(h)]),_:1},8,["disabled"]),v(r,{onClick:l[3]||(l[3]=t=>e.changeCalendarType("year"))},{default:y(()=>[s("div",Be,$(e.displayedYear),1)]),_:1}),v(r,{onClick:l[4]||(l[4]=t=>e.changeCalendar("plusYear"))},{icon:y(()=>[v(k)]),_:1})]),s("div",Te,[v(r,{onClick:l[5]||(l[5]=t=>e.changeCalendar("minusMonth")),disabled:e.selectedYear===1&&e.selectedMonth===1},{icon:y(()=>[v(h)]),_:1},8,["disabled"]),v(r,{onClick:l[6]||(l[6]=t=>e.changeCalendarType("month"))},{default:y(()=>[s("div",Re,$(e.displayedMonth),1)]),_:1}),v(r,{onClick:l[7]||(l[7]=t=>e.changeCalendar("plusMonth"))},{icon:y(()=>[v(k)]),_:1})])])):b("",!0),e.selectedType==="year"?(u(),i("div",Fe,[v(r,{disabled:e.yearRangeIndex===0,onClick:l[8]||(l[8]=t=>e.yearRangeIndex--)},{icon:y(()=>[v(h)]),_:1},8,["disabled"]),s("div",_e,[(u(!0),i(D,null,B(e.years,(t,I)=>(u(),i(D,null,[t?(u(),i("div",{key:I,onClick:F=>e.canClick("year",t)?e.selectYear(t):void 0,class:M({selected:t===e.selectedYear&&e.canClick("year",t),"item whitespace-nowrap min-w-[70px]":!0,disabled:!e.canClick("year",t)})},$(t),11,Se)):b("",!0)],64))),256))]),v(r,{disabled:e.yearRangeIndex===e.currentYearRangeIndex&&!e.needFuture,onClick:l[9]||(l[9]=t=>e.yearRangeIndex++)},{icon:y(()=>[v(k)]),_:1},8,["disabled"])])):b("",!0),e.selectedType==="month"?(u(),i("div",Le,[(u(!0),i(D,null,B(e.months,(t,I)=>(u(),i("div",{key:I,onClick:F=>e.canClick("month",t.value)?e.selectMonth(t.value):void 0,class:M({selected:t.value===e.selectedMonth&&e.canClick("month",t.value),"item whitespace-nowrap min-w-[70px]":!0,disabled:!e.canClick("month",t.value)})},$(t.text),11,Ue))),128))])):b("",!0),s("div",null,[e.selectedType==="date"?(u(),i("div",je,[(u(!0),i(D,null,B(e.weekdays,t=>(u(),i("div",{key:t,class:"mb-4 font-black"},$(t),1))),128)),(u(!0),i(D,null,B(e.firstDayOfMonth,t=>(u(),i("span",{key:"blank-"+t,class:"blank-date item"}))),128)),(u(!0),i(D,null,B(e.calendarDays,t=>(u(),i("div",{key:t,onClick:I=>e.canClick("date",t)?e.selectDate(t):void 0,class:M({selected:e.checkIsSelectedDate(t)&&e.canClick("date",t),item:!0,disabled:!e.canClick("date",t)})},$(t),11,Ne))),128))])):b("",!0)])])),[[L,e.closeCalendar]]):b("",!0)])],2)])}const S=x(De,[["render",Pe],["__scopeId","data-v-f033a934"]]),Ve={class:"flex flex-wrap gap-y-6 max-w-lg"},Ze={class:"w-full"},Ae={class:"mt-2"},Ee={class:"text-xl"},Oe={class:"w-full"},qe={class:"mt-2"},ze={class:"text-xl"},Ge={class:"w-full"},He={class:"mt-2"},Je={class:"text-xl"},Ke={class:"w-full"},Qe={class:"mt-2"},We={class:"text-xl"},Xe={class:"flex justify-center"},et={__name:"Index",setup(e){const l=p(null),m=p("2024/09/05"),f=p("100.01.01"),o=p("");return(d,a)=>(u(),i(D,null,[a[12]||(a[12]=s("div",{class:"text-center mb-4 font-bold text-xl"},"民國年日期選擇器 (CustomRocDatePicker)",-1)),s("div",Ve,[s("div",Ze,[a[5]||(a[5]=s("div",null,"類型1: 無預設值(null) + readonly",-1)),s("div",Ae,[a[4]||(a[4]=R("選擇日期(民國): ")),s("span",Ee,$(l.value),1)]),s("div",null,[v(S,{date:l.value,"onUpdate:date":a[0]||(a[0]=r=>l.value=r),readonly:""},null,8,["date"])])]),s("div",Oe,[a[7]||(a[7]=s("div",null,"類型2: 有預設值(西元) + 自動轉換格式(西元 轉 民國)",-1)),s("div",qe,[a[6]||(a[6]=R("選擇日期(西元): ")),s("span",ze,$(m.value),1)]),v(S,{date:m.value,"onUpdate:date":a[1]||(a[1]=r=>m.value=r),"auto-to-roc-format":""},null,8,["date"])]),s("div",Ge,[a[9]||(a[9]=s("div",null,"類型3: 有預設值(民國) + 變更分隔為. + 需要選擇未來日期",-1)),s("div",He,[a[8]||(a[8]=R("選擇日期(民國): ")),s("span",Je,$(f.value),1)]),v(S,{date:f.value,"onUpdate:date":a[2]||(a[2]=r=>f.value=r),splitter:".","need-future":""},null,8,["date"])]),s("div",Ke,[a[11]||(a[11]=s("div",null,"類型4: 無預設值('') + 只需要 icon button",-1)),s("div",Qe,[a[10]||(a[10]=R("選擇日期(民國): ")),s("span",We,$(o.value),1)]),s("div",Xe,[v(S,{date:o.value,"onUpdate:date":a[3]||(a[3]=r=>o.value=r),"need-input":!1},null,8,["date"])])])])],64))}},lt=x(et,[["__scopeId","data-v-f4bd84bc"]]);export{lt as default};
