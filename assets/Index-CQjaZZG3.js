import{_ as x,c as i,o as u,r as Z,n as T,a as s,b as B,d as le,w as A,e as D,v as ae,f as v,g as $,h as F,i as se,j as E,F as I,k as Y,l as p,m as _,p as oe,q as de,s as ie,t as h}from"./index-DjrrqIhC.js";const ue=["disabled"],re={__name:"BaseButton",props:{customClass:{type:String,default:"icon-button"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const m=n;return(f,o)=>(u(),i("button",{type:"button",class:T(e.customClass),onClick:o[0]||(o[0]=d=>e.disabled?void 0:m("click")),disabled:e.disabled},[Z(f.$slots,"icon",{},void 0),Z(f.$slots,"default",{},void 0)],10,ue))}},ve=x(re,[["__scopeId","data-v-67c1082a"]]),ce={},fe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-calendar"};function pe(e,n){return u(),i("svg",fe,n[0]||(n[0]=[s("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},null,-1),s("line",{x1:"16",y1:"2",x2:"16",y2:"6"},null,-1),s("line",{x1:"8",y1:"2",x2:"8",y2:"6"},null,-1),s("line",{x1:"3",y1:"10",x2:"21",y2:"10"},null,-1)]))}const me=x(ce,[["render",pe]]),ge={},Ce={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#1f1f1f"};function he(e,n){return u(),i("svg",Ce,n[0]||(n[0]=[s("path",{d:"M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z"},null,-1)]))}const ye=x(ge,[["render",he]]),$e={},ke={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#1f1f1f"};function we(e,n){return u(),i("svg",ke,n[0]||(n[0]=[s("path",{d:"M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"},null,-1),B("\\ ")]))}const De=x($e,[["render",we]]),O=(e,n,m)=>{n=n-1;const f=new Date(e,n,m);return f.getFullYear()==e&&f.getMonth()==n&&f.getDate()==m},C=e=>("0"+e).slice(-2),Ie=le({name:"RocCustomDatePicker",components:{BaseButton:ve,CalendarIcon:me,ChevronLeftIcon:ye,ChevronRightIcon:De},props:{date:{type:String,default:""},placeholder:{type:String,default:"民國年/月/日"},splitter:{type:String,default:"/"},readonly:{type:Boolean,default:!1},needInput:{type:Boolean,default:!0},needFuture:{type:Boolean,default:!1},autoToRocFormat:{type:Boolean,default:!1}},emits:["update:date"],setup(e,{emit:n}){const m=p(!0),f=p(!1),o=p(null),d=p(null),a=p(null),r=p([]),y=p("date"),k=p(null),L=p(Math.floor((new Date().getFullYear()-1911)/15)),t=p(null),b=["日","一","二","三","四","五","六"],R=[{text:"一月",value:1},{text:"二月",value:2},{text:"三月",value:3},{text:"四月",value:4},{text:"五月",value:5},{text:"六月",value:6},{text:"七月",value:7},{text:"八月",value:8},{text:"九月",value:9},{text:"十月",value:10},{text:"十一月",value:11},{text:"十二月",value:12}],U=_({get:()=>e.date,set:l=>n("update:date",l)}),P=_(()=>{var l;return((l=R.find(c=>c.value===d.value))==null?void 0:l.text)||""}),q=_(()=>parseInt(o.value)<=0?`民國前 ${Math.abs(o.value)+1} 年`:`民國 ${o.value} 年`),z=_(()=>{const l=k.value*15;return Array.from({length:15},(g,w)=>l+w)}),G=_(()=>{const l=o.value,c=d.value;return!l||!c?0:new Date(l+1911,c-1,1).getDay()});oe(()=>t.value,(l,c)=>{if(l!==c){const g=new Date(l).toString()!=="Invalid Date",w=l.split(e.splitter);if(!g||w.length!==3){N();return}o.value=parseInt(w[0]),d.value=parseInt(w[1]),a.value=parseInt(w[2]),g&&O(o.value+1911,d.value,a.value)?U.value=e.autoToRocFormat?`${o.value+1911}/${C(d.value)}/${C(a.value)}`:l:U.value=""}});const M=()=>{if(r.value=[],o.value&&d.value){const l=o.value+1911,c=d.value,g=new Date(l,c,0).getDate();r.value=Array.from({length:g},(w,ne)=>ne+1)}},H=l=>{l==="minusYear"?o.value-=1:l==="plusYear"?o.value+=1:l==="minusMonth"?d.value>1?d.value-=1:(d.value=12,o.value-=1):l==="plusMonth"&&(d.value<12?d.value+=1:(d.value=1,o.value+=1)),M()},J=l=>`${o.value}${e.splitter}${C(d.value)}${e.splitter}${C(l)}`===t.value,K=()=>{var c;const l=(c=t.value)==null?void 0:c.split(e.splitter);!l||l.length!==3||!O(parseInt(l[0])+1911,parseInt(l[1]),parseInt(l[2]))?N():(V(t.value),t.value=`${o.value}${e.splitter}${C(d.value)}${e.splitter}${C(a.value)}`),setTimeout(()=>{f.value?j():f.value=!0},50)},j=()=>{y.value="date",f.value=!1},Q=l=>{y.value=l},W=l=>{o.value=l,y.value="month",d.value=null},X=l=>{d.value=l,y.value="date",a.value=null,M()},ee=l=>{a.value=l,t.value=[o.value,C(d.value),C(a.value)].join(e.splitter),f.value=!1},N=()=>{const l=new Date;o.value=l.getFullYear()-1911,d.value=l.getMonth()+1,a.value=null,k.value=Math.floor(o.value/15),setTimeout(()=>{M()},100)},V=(l,c=!1)=>{const g=l.split(e.splitter);o.value=c?parseInt(g[0])-1911:parseInt(g[0]),d.value=parseInt(g[1]),a.value=parseInt(g[2]),k.value=Math.floor(o.value/15),setTimeout(()=>{M()},100)},te=(l,c)=>{if(e.needFuture)return!0;if(l==="year")return!(c>new Date().getFullYear()-1911);if(l==="month")return!(o.value>=new Date().getFullYear()-1911&&c>new Date().getMonth()+1);if(l==="date")return!(new Date(o.value+1911,d.value-1,c)>new Date)};return de(()=>{e.date?(V(e.date,e.autoToRocFormat),t.value=`${o.value}${e.splitter}${C(d.value)}${e.splitter}${C(a.value)}`,m.value=!1):N()}),ie(()=>{document.removeEventListener("click",j)}),{changeCalendar:H,changeCalendarType:Q,checkIsSelectedDate:J,displayedDate:t,displayedMonth:P,displayedYear:q,firstDayOfMonth:G,showCalendar:f,selectedYear:o,selectedMonth:d,selectedDay:a,calendarDays:r,months:R,years:z,toggleCalendar:K,closeCalendar:j,generateDayCalendar:M,selectDate:ee,selectMonth:X,selectYear:W,selectedType:y,weekdays:b,myDate:U,yearRangeIndex:k,currentYearRangeIndex:L,canClick:te}}}),be={class:"date-picker"},xe=["placeholder","readonly"],Me={key:0,class:"flex gap-x-4 items-center mb-6"},Ye={class:"flex gap-x-2 items-center"},_e={class:"whitespace-nowrap"},Te={class:"flex gap-x-2 items-center"},Be={class:"whitespace-nowrap"},Re={key:1,class:"flex flex-nowrap gap-x-2 items-center"},Fe={class:"year-calendar"},Se=["onClick"],Le={key:2,class:"month-calendar"},Ue=["onClick"],je={key:0,class:"day-calendar"},Ne=["onClick"];function Ve(e,n,m,f,o,d){const a=F("CalendarIcon"),r=F("base-button"),y=F("ChevronLeftIcon"),k=F("ChevronRightIcon"),L=se("click-outside");return u(),i("div",be,[s("div",{class:T(`input-wrapper px-2 ${e.needInput?"border border-solid rounded-[5px] border-[#ccc]":""}`),onClick:n[11]||(n[11]=E(()=>{},["stop"]))},[e.needInput?A((u(),i("input",{key:0,type:"text","onUpdate:modelValue":n[0]||(n[0]=t=>e.displayedDate=t),placeholder:e.placeholder,class:"outline-none !border-hidden",readonly:e.readonly,onClick:n[1]||(n[1]=t=>e.readonly?e.toggleCalendar():void 0)},null,8,xe)),[[ae,e.displayedDate]]):D("",!0),s("div",null,[v(r,{onClick:e.toggleCalendar},{icon:$(()=>[v(a)]),_:1},8,["onClick"]),e.showCalendar?A((u(),i("div",{key:0,id:"customCalendar",class:"calendar",onClick:n[10]||(n[10]=E(()=>{},["stop"]))},[e.selectedType==="date"?(u(),i("div",Me,[s("div",Ye,[v(r,{onClick:n[2]||(n[2]=t=>e.changeCalendar("minusYear")),disabled:e.selectedYear===1},{icon:$(()=>[v(y)]),_:1},8,["disabled"]),v(r,{onClick:n[3]||(n[3]=t=>e.changeCalendarType("year"))},{default:$(()=>[s("div",_e,h(e.displayedYear),1)]),_:1}),v(r,{onClick:n[4]||(n[4]=t=>e.changeCalendar("plusYear"))},{icon:$(()=>[v(k)]),_:1})]),s("div",Te,[v(r,{onClick:n[5]||(n[5]=t=>e.changeCalendar("minusMonth")),disabled:e.selectedYear===1&&e.selectedMonth===1},{icon:$(()=>[v(y)]),_:1},8,["disabled"]),v(r,{onClick:n[6]||(n[6]=t=>e.changeCalendarType("month"))},{default:$(()=>[s("div",Be,h(e.displayedMonth),1)]),_:1}),v(r,{onClick:n[7]||(n[7]=t=>e.changeCalendar("plusMonth"))},{icon:$(()=>[v(k)]),_:1})])])):D("",!0),e.selectedType==="year"?(u(),i("div",Re,[v(r,{disabled:e.yearRangeIndex===0,onClick:n[8]||(n[8]=t=>e.yearRangeIndex--)},{icon:$(()=>[v(y)]),_:1},8,["disabled"]),s("div",Fe,[(u(!0),i(I,null,Y(e.years,(t,b)=>(u(),i(I,null,[t?(u(),i("div",{key:b,onClick:R=>e.canClick("year",t)?e.selectYear(t):void 0,class:T({selected:t===e.selectedYear&&e.canClick("year",t),"item whitespace-nowrap min-w-[70px]":!0,disabled:!e.canClick("year",t)})},h(t),11,Se)):D("",!0)],64))),256))]),v(r,{disabled:e.yearRangeIndex===e.currentYearRangeIndex&&!e.needFuture,onClick:n[9]||(n[9]=t=>e.yearRangeIndex++)},{icon:$(()=>[v(k)]),_:1},8,["disabled"])])):D("",!0),e.selectedType==="month"?(u(),i("div",Le,[(u(!0),i(I,null,Y(e.months,(t,b)=>(u(),i("div",{key:b,onClick:R=>e.canClick("month",t.value)?e.selectMonth(t.value):void 0,class:T({selected:t.value===e.selectedMonth&&e.canClick("month",t.value),"item whitespace-nowrap min-w-[70px]":!0,disabled:!e.canClick("month",t.value)})},h(t.text),11,Ue))),128))])):D("",!0),s("div",null,[e.selectedType==="date"?(u(),i("div",je,[(u(!0),i(I,null,Y(e.weekdays,t=>(u(),i("div",{key:t,class:"mb-4 font-black"},h(t),1))),128)),(u(!0),i(I,null,Y(e.firstDayOfMonth,t=>(u(),i("span",{key:"blank-"+t,class:"blank-date item"}))),128)),(u(!0),i(I,null,Y(e.calendarDays,t=>(u(),i("div",{key:t,onClick:b=>e.canClick("date",t)?e.selectDate(t):void 0,class:T({selected:e.checkIsSelectedDate(t)&&e.canClick("date",t),item:!0,disabled:!e.canClick("date",t)})},h(t),11,Ne))),128))])):D("",!0)])])),[[L,e.closeCalendar]]):D("",!0)])],2)])}const S=x(Ie,[["render",Ve],["__scopeId","data-v-90e88fce"]]),Ze={class:"flex flex-wrap gap-y-6"},Ae={class:"w-full"},Ee={class:"mt-2"},Oe={class:"text-xl"},Pe={class:"w-full"},qe={class:"mt-2"},ze={class:"text-xl"},Ge={class:"w-full"},He={class:"mt-2"},Je={class:"text-xl"},Ke={class:"w-full"},Qe={class:"mt-2"},We={class:"text-xl"},Xe={class:"flex justify-center"},et={__name:"Index",setup(e){const n=p(null),m=p("2024/09/05"),f=p("100.01.01"),o=p("");return(d,a)=>(u(),i(I,null,[a[12]||(a[12]=s("div",{class:"text-center mb-4 font-bold text-xl"},"民國年日期選擇器",-1)),s("div",Ze,[s("div",Ae,[a[5]||(a[5]=s("div",null,"類型1: 無預設值(null) + readonly",-1)),s("div",Ee,[a[4]||(a[4]=B("選擇日期(民國): ")),s("span",Oe,h(n.value),1)]),s("div",null,[v(S,{date:n.value,"onUpdate:date":a[0]||(a[0]=r=>n.value=r),readonly:""},null,8,["date"])])]),s("div",Pe,[a[7]||(a[7]=s("div",null,"類型2: 有預設值(西元) + 自動轉換格式(西元 轉 民國)",-1)),s("div",qe,[a[6]||(a[6]=B("選擇日期(西元): ")),s("span",ze,h(m.value),1)]),v(S,{date:m.value,"onUpdate:date":a[1]||(a[1]=r=>m.value=r),"auto-to-roc-format":""},null,8,["date"])]),s("div",Ge,[a[9]||(a[9]=s("div",null,"類型3: 有預設值(民國) + 變更分隔為. + 需要選擇未來日期",-1)),s("div",He,[a[8]||(a[8]=B("選擇日期(民國): ")),s("span",Je,h(f.value),1)]),v(S,{date:f.value,"onUpdate:date":a[2]||(a[2]=r=>f.value=r),splitter:".","need-future":""},null,8,["date"])]),s("div",Ke,[a[11]||(a[11]=s("div",null,"類型4: 無預設值('') + 只需要 icon button",-1)),s("div",Qe,[a[10]||(a[10]=B("選擇日期(民國): ")),s("span",We,h(o.value),1)]),s("div",Xe,[v(S,{date:o.value,"onUpdate:date":a[3]||(a[3]=r=>o.value=r),"need-input":!1},null,8,["date"])])])])],64))}},nt=x(et,[["__scopeId","data-v-b8d4411e"]]);export{nt as default};
